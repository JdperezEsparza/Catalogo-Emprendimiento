<!--index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Boutique de Gertrudis</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="chatbot.css">
</head>
<body>
    <div class="header">
        <h1>游녱 La Boutique de Gertrudis</h1>
        <div id="headerActions">
            <button class="btn btn-cart" onclick="openModal('cartModal')">
                游 Carrito (<span id="cartCount">0</span>)
            </button>
            <button class="btn btn-primary" onclick="openModal('userLoginModal')">Iniciar Sesi칩n</button>
            <button class="btn btn-secondary" onclick="openModal('registerModal')">Registrarse</button>
            <button class="btn" onclick="openModal('loginModal')" style="background: #666;">Admin</button>
        </div>
    </div>

    <!-- Navegaci칩n Admin -->
    <div id="adminNav" class="admin-nav" style="display: none;">
        <button class="nav-btn active" onclick="showSection('products')">游닍 Productos</button>
        <button class="nav-btn" onclick="showSection('orders')">游늶 Pedidos</button>
        <button class="nav-btn" onclick="showSection('analytics')">游늵 Anal칤ticas</button>
    </div>

    <div class="container">
        <div id="catalogContent"></div>
        <div id="ordersContent" style="display: none;"></div>
        <div id="analyticsContent" style="display: none;"></div>
    </div>

    <!-- Bot칩n Flotante de WhatsApp -->
    <a href="https://wa.me/573115564583?text=Hola%2C%20estoy%20interesado%20en%20sus%20prendas" 
       class="whatsapp-float" 
       target="_blank"
       rel="noopener noreferrer"
       title="Cont치ctanos por WhatsApp">
        <svg viewBox="0 0 32 32" class="whatsapp-icon">
            <path fill="currentColor" d="M16 0C7.164 0 0 7.164 0 16c0 2.827.744 5.584 2.155 8.001L.08 31.92l8.094-2.063A15.927 15.927 0 0016 32c8.836 0 16-7.164 16-16S24.836 0 16 0zm0 29.333c-2.547 0-5.042-.732-7.196-2.111l-.516-.312-5.348 1.363 1.402-5.135-.341-.534A13.267 13.267 0 012.667 16c0-7.364 5.969-13.333 13.333-13.333S29.333 8.636 29.333 16 23.364 29.333 16 29.333z"/>
            <path fill="currentColor" d="M23.473 19.394c-.384-.192-2.267-1.119-2.619-1.247-.352-.128-.608-.192-.864.192-.256.384-.992 1.247-1.216 1.503-.224.256-.448.288-.832.096-.384-.192-1.621-.597-3.087-1.903-1.141-.992-1.912-2.219-2.136-2.603-.224-.384-.024-.592.168-.784.173-.171.384-.448.576-.672.192-.224.256-.384.384-.64.128-.256.064-.48-.032-.672-.096-.192-.864-2.075-1.184-2.843-.312-.747-.629-.646-.864-.658-.224-.011-.48-.013-.736-.013s-.672.096-1.024.48c-.352.384-1.344 1.312-1.344 3.199s1.376 3.711 1.568 3.967c.192.256 2.715 4.147 6.579 5.816.919.397 1.637.635 2.197.812.923.293 1.763.251 2.427.152.741-.111 2.267-.928 2.587-1.824.32-.896.32-1.664.224-1.824-.096-.16-.352-.256-.736-.448z"/>
        </svg>
        <span class="whatsapp-text">Cont치ctanos</span>
    </a>

    <!-- Modal Registro Usuario -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游닇 Crear Cuenta</h2>
                <button class="close-btn" onclick="closeModal('registerModal')">&times;</button>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label>Nombre Completo *</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label>Tel칠fono</label>
                    <input type="tel" id="registerPhone">
                </div>
                <div class="form-group">
                    <label>Direcci칩n</label>
                    <textarea id="registerAddress" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>Ciudad</label>
                    <input type="text" id="registerCity">
                </div>
                <div class="form-group">
                    <label>Contrase침a * (m칤nimo 6 caracteres)</label>
                    <input type="password" id="registerPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label>Confirmar Contrase침a *</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Registrarse</button>
                <p style="text-align: center; margin-top: 1rem; color: #a0a0a0;">
                    쯏a tienes cuenta? <a href="#" onclick="closeModal('registerModal'); openModal('userLoginModal'); return false;" style="color: #3498db;">Inicia sesi칩n</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Modal Login Usuario -->
    <div id="userLoginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游녻 Iniciar Sesi칩n</h2>
                <button class="close-btn" onclick="closeModal('userLoginModal')">&times;</button>
            </div>
            <form id="userLoginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="userLoginEmail" required>
                </div>
                <div class="form-group">
                    <label>Contrase침a</label>
                    <input type="password" id="userLoginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Iniciar Sesi칩n</button>
                <p style="text-align: center; margin-top: 1rem; color: #a0a0a0;">
                    쯅o tienes cuenta? <a href="#" onclick="closeModal('userLoginModal'); openModal('registerModal'); return false;" style="color: #3498db;">Reg칤strate</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Modal Perfil Usuario -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游녻 Mi Perfil</h2>
                <button class="close-btn" onclick="closeModal('profileModal')">&times;</button>
            </div>
            <form id="profileForm">
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" id="profileName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="profileEmail" disabled style="background: #0a0a0a; opacity: 0.6;">
                </div>
                <div class="form-group">
                    <label>Tel칠fono</label>
                    <input type="tel" id="profilePhone">
                </div>
                <div class="form-group">
                    <label>Direcci칩n</label>
                    <textarea id="profileAddress" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Ciudad</label>
                    <input type="text" id="profileCity">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Guardar Cambios</button>
                <button type="button" class="btn btn-secondary" onclick="openModal('changePasswordModal')" style="width: 100%; margin-top: 0.5rem;">Cambiar Contrase침a</button>
            </form>
        </div>
    </div>

    <!-- Modal Cambiar Contrase침a -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游 Cambiar Contrase침a</h2>
                <button class="close-btn" onclick="closeModal('changePasswordModal')">&times;</button>
            </div>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label>Contrase침a Actual</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label>Nueva Contrase침a (m칤nimo 6 caracteres)</label>
                    <input type="password" id="newPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label>Confirmar Nueva Contrase침a</label>
                    <input type="password" id="confirmNewPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Cambiar Contrase침a</button>
            </form>
        </div>
    </div>

    <!-- Modal Login Admin -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>游댏 Login Administrador</h2>
                <button class="close-btn" onclick="closeModal('loginModal')">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label>Usuario</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label>Contrase침a</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Iniciar Sesi칩n</button>
            </form>
        </div>
    </div>

    <!-- Modal Producto Admin -->
    <div id="productModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 id="productModalTitle">Nueva Prenda</h2>
                <button class="close-btn" onclick="closeModal('productModal')">&times;</button>
            </div>
            <form id="productForm">
                <input type="hidden" id="productId">
                
                <div class="form-group">
                    <label>Imagen del Producto</label>
                    
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <img id="productImagePreview" 
                             style="max-width: 100%; max-height: 300px; border-radius: 10px; display: none; border: 2px solid #2d2d2d;" 
                             alt="Preview">
                    </div>
                    
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <label for="productImageFile" class="btn btn-secondary" id="uploadImageBtn" style="flex: 1; text-align: center; margin: 0;">
                            游닞 Subir Imagen
                            <input type="file" 
                                   id="productImageFile" 
                                   accept="image/*" 
                                   onchange="handleProductImageUpload(event)" 
                                   style="display: none;">
                        </label>
                        <button type="button" 
                                class="btn btn-primary" 
                                onclick="toggleUrlInput()" 
                                style="flex: 1;">
                            游댕 Usar URL
                        </button>
                    </div>
                    
                    <div id="uploadProgress" style="display: none; margin-bottom: 0.5rem;">
                        <div style="background: #2d2d2d; border-radius: 10px; overflow: hidden; height: 25px; position: relative;">
                            <div id="uploadProgressFill" style="background: linear-gradient(90deg, #2ecc71, #27ae60); height: 100%; width: 0%; transition: width 0.3s;"></div>
                            <span id="uploadProgressText" style="position: absolute; width: 100%; text-align: center; line-height: 25px; color: #fff; font-weight: bold;">0%</span>
                        </div>
                    </div>
                    
                    <div id="urlInputSection" style="display: none;">
                        <input type="url" 
                               id="productImageUrl" 
                               class="form-control"
                               placeholder="https://ejemplo.com/imagen.jpg"
                               onchange="updateImageFromUrl(this.value)">
                    </div>
                    
                    <input type="hidden" id="productImage" required>
                    
                    <small style="color: #a0a0a0; font-size: 0.85rem;">
                        游눠 Puedes subir una imagen o usar una URL. Formatos: JPG, PNG, WebP (m치x 10MB)
                    </small>
                </div>
                
                <div class="form-group">
                    <label>Nombre de la Prenda</label>
                    <input type="text" id="productName" placeholder="Ej: Vestido Floral Primavera" required>
                </div>
                
                <div class="form-group">
                    <label>Descripci칩n</label>
                    <textarea id="productDescription" rows="4" placeholder="Describe la prenda: material, estilo, ocasi칩n..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Precio (COP)</label>
                    <input type="number" id="productPrice" placeholder="50000" required min="0" step="1000">
                </div>
                
                <div class="form-group">
                    <label>Stock Disponible</label>
                    <input type="number" id="productStock" required min="0" value="10">
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%">
                    游 Guardar Prenda
                </button>
            </form>
        </div>
    </div>

    <!-- Modal Carrito -->
    <div id="cartModal" class="modal">
        <div class="modal-content cart-modal">
            <div class="modal-header">
                <h2>Tu Carrito de Compras</h2>
                <button class="close-btn" onclick="closeModal('cartModal')">&times;</button>
            </div>
            <div id="cartContent"></div>
        </div>
    </div>

    <!-- Modal Checkout -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Finalizar Compra</h2>
                <button class="close-btn" onclick="closeModal('checkoutModal')">&times;</button>
            </div>
            <form id="checkoutForm">
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" id="customerName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="customerEmail" required>
                </div>
                <div class="form-group">
                    <label>Tel칠fono</label>
                    <input type="tel" id="customerPhone" required>
                </div>
                <div class="form-group">
                    <label>Direcci칩n de Env칤o</label>
                    <textarea id="customerAddress" required rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Ciudad</label>
                    <input type="text" id="customerCity" required>
                </div>
                <div class="checkout-total">
                    <h3>Total a Pagar: <span id="checkoutTotal"></span></h3>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">Confirmar Pedido</button>
            </form>
        </div>
    </div>

    <!-- Modal Detalle de Orden (Admin) -->
    <div id="orderDetailModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Detalle del Pedido</h2>
                <button class="close-btn" onclick="closeModal('orderDetailModal')">&times;</button>
            </div>
            <div id="orderDetailContent"></div>
        </div>
    </div>

    <!-- Modal Detalle de Orden (Usuario) -->
    <div id="userOrderDetailModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Detalle de Mi Pedido</h2>
                <button class="close-btn" onclick="closeModal('userOrderDetailModal')">&times;</button>
            </div>
            <div id="userOrderDetailContent"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="chatbot.js"></script>
</body>
</html>